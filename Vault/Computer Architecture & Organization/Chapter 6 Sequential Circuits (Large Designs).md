---
share_link: https://share.note.sx/ep0oduf5#m+VcnoFRRQ66BxwwFGvUYnIbT4DtpcF/cPyTwol0sUw
share_updated: 2025-11-14T00:05:25-08:00
---
# <u>Introduction</u>
*A large sequential circuit is made of data path and a [[control unit]]*, the data path consists of both sequential and combinational circuit modules such as
- Registers
- Counters
- Multiplexers
- Decoders
- Arithmetic Logic Units

Modules implement a list of simple operations like adding content of two registers and storing the result in a third register.
The Control Unit is responsible for asserting the necessary control signals for the data path to carry out an operation.
A data path may perform one or more operations during each clock cycle.
![[Screenshot 2025-10-29 at 9.56.04 PM.png]]
Each data path operation requires one or more inputs as data and generates on or more outputs where each is stored in a register or memory.
A data path may also perform one or more operations conditionally depending on the value of an internal signal or another module external to the data path.
External event triggering signals like a signal starting the Control Unit or a signal generated by a keystroke or a signal indicating a memory data is available to read.

A high clock frequency implied that the data path has a short maximum propagation delay but there is a relationship between a circuits clock frequency and its number of transistors, amount of power needed to power them, and how much heat the circuit can dissipate. The amount of heat an IC can dissipate on average sets the limit on how high its clock frequency can be.

---
# <u>Register Transfer Notation</u>
A register transfer notation (RTN) is used to formally describe an operation of a data path.  
Each operation generates a result that must be stored in a storage module such as a register or memory.

**R<sub>3</sub> <- R<sub>2</sub> + R<sub>1</sub>** is an example of RTN that involves three registers R<sub>1</sub> R<sub>2</sub> and R<sub>3</sub>.
The sum of R<sub>1</sub> and R<sub>2</sub> register contents will be stored in R<sub>3</sub> during the next clock cycle.

---
# <u>Data Path Design</u>
***The architecture of a data path can be classified as***
- Single Cycle
- Multicycle
- Pipelined

| Single Cycle         | Multicycle                                | Pipelined                               |
| -------------------- | ----------------------------------------- | --------------------------------------- |
| More hardware        | Less hardware                             | More Hardware                           |
| Simpler Control Unit | Generates results in several clock cycles | Operate on multiple inputs concurrently |
| Longer clock period  | Short clock period                        |                                         |
| Slower frequency     | Higher frequency                          |                                         |
| One clock cycle      | Multiple clock cycles                     |                                         |

> [!important]
>  Pipelining is only efficient when there are multiple inputs to process.
> 

$R$  <- $A+B+C+D$ 
$R$  <- $A+B+C-D$
Do not represent operations a typical CPU performs, such RTNs are called *fused operations* requiring operations on three or more data values.
A typical arithmetic instruction operates on two data values.

Some CPUs have instructions that perform ***fused operations*** on three data values such Multiply Accumulate (MAC), a popular computation involving matrices.
$R$  <- $A+B*C$ 

> [!IMPORTANT]
> If A, B, and C are floating point numbers then a ***fused operation*** has the advantage of producing a result in memory with only one rounding error.
> If done separately with two instructions the result of B * C, if stored in memory, would produce one rounding error and adding A to the memory content, if stored in memory again, will produce another rounding error.

---
# <u>Single Cycle</u>
*The image below illustrates a single cycle data path that computes either A+B+C+D or A+B+C-D and stores the result in register R within one clock cycle.
The signal mode controls the functions of the adder/subtractor module.*

If mode = 0 then A+B+C+D is performed
If mode = 1 then A+B+C-D is performed
![[Screenshot 2025-11-11 at 8.19.35 PM.png]]

> [!IMPORTANT]
> The equation below estimates the minimum clock period required to run the data path for single cycle.
> T $>=$ 2$\Delta$<sub>ADD</sub> + $\Delta$<sub>ADD/SUB</sub> + T<sub>st</sub> + T<sub>cq</sub> + T<sub>cs</sub>

If a single cycle data implements several simple and complex operations, the minimum clock period would be proportional to the time required to complete the most complex operations.
This means both simple and complex operations would take the same time to complete. This introduces extra time needed to complete a task that would require both simple and complex operations.

---
# <u>Multicycle</u>
*A multicycle data path requires computations that can be divided and completed in steps, each requiring a simple data path operation*
*The image below illustrates a multicycle data path with a single adder/subtractor and two multiplexer modules*

The data path can perform five possible simple operations

| Cycle                  | Operation  |
| ---------------------- | ---------- |
| Cycle 1                | R <- A     |
| Cycle 2                | R <- R + B |
| Cycle 3                | R <- R + C |
| Cycle 4 (if mode == 0) | R <- R + D |
| Cycle 4 (if mode == 1) | R <- R - D |
![[Screenshot 2025-11-11 at 8.41.36 PM.png]]

The clock period of a multicycle data path is also proportional to the delay of its longest signal path.
In this case the longest path starts from the inputs of MUX1 through the adder/subtractor module through the input of MUX2 and ends at the input of the register.
> [!IMPORTANT]
> The equation below estimates the minimum clock period required to run the data path for single cycle.
> T $>=$ $\Delta$<sub>MUX1</sub> + $\Delta$<sub>ADD/SUB</sub> + T<sub>MUX2</sub> + T<sub>st</sub> + T<sub>cq</sub> + T<sub>cs</sub>

Multicycle data paths are advantageous if it performs both simple and complex computations.
Multicycle data paths require a higher frequency (short clock period).
A single cycle data path requires a longer period clock but only uses on clock cycle.

---
# <u> Pipelined </u>
*A pipelined data path, or pipeline for short, is the ideal architecture for processing a stream of data.*
*Adding N pairs of FP numbers is done one pair at a time.*
*Computations are divided into a set of dependent operations, similar to multicycle data path.*
*Each operation is performed in a separate subdata path called a pipeline stage.*

> [!IMPORTANT] Important
> The stages do ***not*** share any modules and are separated by parallel-load registers forming an assembly line. 
> All stages operate ***concurrently*** to process a steam of data.

Consider the following equation:
A + B + C + D

| Stage | Operation  |
| ----- | ---------- |
| 1     | X <- A + B |
| 2     | Y <- X + C |
| 3     | R <- Y + D |

During each clock cycle:
- Stage 1 takes inputs from an external data source.
- Stage 2 takes inputs from stage 1
- Stage 3 takes inputs from stage 2
All three stages operate concurrently during each clock cycle.
![[Screenshot 2025-11-13 at 11.35.13 PM.png]]

> [!WARNING] Title
> The charts do not include the one-cycle delay caused by the interfacing registers shown above.

![[Screenshot 2025-11-13 at 11.36.33 PM.png]]

> [!INFO]
> The equation below estimates the minimum clock period required to run the data path for pipeline for the above circuit.  
> T $>=$ $\Delta$<sub>ADD/SUB</sub> + T<sub>st</sub> + T<sub>cq</sub> + T<sub>cs</sub>

---
# <u> Pipeline Performance </u>
***K*** *can be defined as the amount of stages in a linear pipeline*
***N*** *can be defined as the size of the data stream*

#### ***Speedup***
- Measures the performance of a faster system compared to the slower system.
- Defined as the ratio of time taken by slower system over the time taken by faster system.
- Compares how much faster a faster system is compared to its slower equivalent.

$$
Speedup = \dfrac{Tsinglecycle}{Tpipeline} = \dfrac{Nk\tau}{\kappa\tau + (N-1)\tau} = \dfrac{Nk}{k + N -1}
$$
- For example if ***N*** = 3 and ***K*** = 3 then
$$
\dfrac{Nk}{k + N -1} = \dfrac{3 * 3}{3 + 3 -1} = \dfrac{9}{5} = 1.8
$$
#### ***Efficiency***
- Measures how well a system's resources are being utilized to complete a task.
- Efficiency is said to be 100% if all its stages were busy all of the time (no idle stages).
- Defined as the ratio of its ***speedup*** to its maximum possible ***speedup***.

$$
Efficiency = \dfrac{Speedup}{\kappa} = \dfrac{N}{\kappa + N - 1}
$$
#### ***Throughput***
- Measures a systems rate of processing as number of items N performed per second.
- Calculated as the ratio of total number of items performed over the total required time.

$$
Throughput = \dfrac{N}{Tpipeline} = \dfrac{N}{\kappa\tau+ (N - 1)\tau}
$$
